<%- include('header') %>

<p>
<% if (query.subject) { %>
  subject=<%- include('link', { url: query.subject }) %>
<% } %>
</p>

<p>
  <form action="/vocabularies">
    <div class="form-group row">
      <label for="type" class="col-form-label col-sm-2">Type</label>
      <div class="col-sm-10">
        <select class="form-control" name="type" onchange="this.form.submit()">
          <option value="">any</option>
          <% for (let item of nkostypes) { %>
            <option value="<%= item.uri %>" <%= query.type === item.uri ? "selected" : "" %>>
              <%- include('item', { item, url: false }) %>
            </option>
          <% } %>
        </select>
      </div>
    </div>
    <div class="form-group row">
      <div class="col-sm-2"></div>
      <div class="col-sm-10">
        <input type="submit" class="btn btn-primary"></input>
      </div>
    </div>
  </form>
</p>

<p><%- result.length %> records found</p>

<hr>

<ul>
<% for (let item of result) { %>
<li>
  <%- include('item', { item, base: '/vocabularies' }) %>
</li>
<% } %>
</ul>

<% if (result.length < result.totalCount) { %>
  <p>TODO: pagination (<%- result.totalCount %> total</p>
<% } %>

<hr>

<%- include('footer') %>
